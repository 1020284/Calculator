<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="UTF-8" />
  <title>Learning Hub</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
  <style>
    /* ===== Global Reset ===== */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    html, body { height: 100%; }

    /* ===== Root Variables ===== */
    :root {
      --bg-color: #0b1220;
      --surface: #0f172a;
      --primary: #38bdf8;
      --secondary: #ef4444;
      --accent: #a3e635;
      --success: #22c55e;
      --warning: #f59e0b;
      --text: #e6edf7;
      --muted: #94a3b8;

      --radius-xs: 8px;
      --radius: 16px;
      --radius-lg: 24px;

      --shadow-sm: 0 4px 12px rgba(0,0,0,0.35);
      --shadow: 0 8px 24px rgba(0,0,0,0.45);
      --shadow-lg: 0 16px 40px rgba(0,0,0,0.6);

      --glass: rgba(16,23,42,0.35);
      --glass-strong: rgba(16,23,42,0.55);

      --gradient: linear-gradient(135deg, var(--primary), var(--accent));
      --gradient-alt: radial-gradient(1000px 500px at 80% 20%, rgba(56,189,248,0.18), transparent 60%);

      --transition-fast: 150ms ease;
      --transition: 300ms ease;
      --transition-slow: 600ms ease;
    }

    /* ===== Base ===== */
    body {
      font-family: 'Poppins', Inter, ui-sans-serif, system-ui, "Segoe UI", Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: var(--bg-color);
      color: var(--text);
      line-height: 1.6;
      overflow-x: hidden;
      transition: background var(--transition), color var(--transition);
      background-image: var(--gradient-alt);
      min-height: 100vh;
      padding: 2rem 1rem;
      display: grid;
      grid-template-columns: 1fr min(900px, 90%) 1fr;
      grid-template-rows: auto 1fr auto;
      gap: 2rem;
      position: relative;
      z-index: 1;
    }

    /* Wrapper for content in center column */
    main.content-wrapper {
      grid-column: 2;
      display: flex;
      flex-direction: column;
      gap: 2rem;
      z-index: 10;
    }

    /* ===== Header ===== */
    header.header {
      grid-column: 2;
      text-align: center;
      margin-bottom: 1rem;
      z-index: 10;
    }
    header h1 {
      font-size: clamp(2rem, 4vw, 3.5rem);
      font-weight: 800;
      background: var(--gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 0.25rem;
      user-select: none;
      letter-spacing: 0.05em;
      text-transform: uppercase;
      text-shadow: 0 0 6px var(--primary);
    }
    .tagline {
      color: var(--muted);
      font-weight: 500;
      font-style: italic;
      letter-spacing: 0.02em;
    }

    /* ===== Tools Grid ===== */
    .tools-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap: 1.75rem 2rem;
      align-items: start;
    }

    /* ===== Tool Cards ===== */
    .tool-card {
      background: var(--glass);
      border-radius: var(--radius-lg);
      padding: 1.75rem 2rem;
      box-shadow: var(--shadow-lg);
      backdrop-filter: blur(20px);
      transition: box-shadow var(--transition);
      border: 1px solid transparent;
      position: relative;
      overflow: hidden;
      cursor: default;
      display: flex;
      flex-direction: column;
      min-height: 230px;
      pointer-events: auto;
    }
    .tool-card::before {
      content: '';
      position: absolute;
      inset: 0;
      border-radius: var(--radius-lg);
      background: linear-gradient(60deg, var(--primary), var(--secondary), var(--accent));
      opacity: 0.15;
      filter: blur(20px);
      z-index: 0;
      transition: opacity 0.4s ease;
    }
    .tool-card:hover::before {
      opacity: 0.35;
    }
    .tool-card:hover {
      box-shadow: var(--shadow-lg), 0 0 30px var(--primary);
      border-color: var(--primary);
    }
    .tool-card h2 {
      font-size: clamp(1.5rem, 2vw + 0.5rem, 2.25rem);
      color: var(--primary);
      margin-bottom: 1rem;
      position: relative;
      z-index: 1;
      user-select: none;
      text-shadow: 0 0 5px var(--primary);
    }

    input.input, select.input, textarea.input, input[type="text"], input[type="number"], input[type="password"], textarea {
      width: 100%;
      background: var(--surface);
      color: var(--text);
      border: 1.5px solid rgba(127,127,127,0.25);
      padding: 0.75rem 1rem;
      border-radius: var(--radius);
      font-size: 1rem;
      outline: none;
      transition: border-color var(--transition), box-shadow var(--transition);
      margin-bottom: 1rem;
      font-family: 'Poppins', sans-serif;
      box-shadow: inset 0 2px 5px rgba(0,0,0,0.05);
      flex-shrink: 0;
      pointer-events: auto;
    }
    input.input:focus, select.input:focus, textarea.input:focus, input[type="text"]:focus, input[type="number"]:focus, input[type="password"]:focus, textarea:focus {
      border-color: var(--primary);
      box-shadow: 0 0 0 6px rgba(56,189,248,0.3);
      background: var(--surface);
    }
    textarea.input, textarea {
      resize: vertical;
      min-height: 6rem;
      font-size: 1rem;
      line-height: 1.4;
    }

    button.button, button {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: var(--gradient);
      color: #fff;
      border: none;
      padding: 0.85rem 1.5rem;
      border-radius: var(--radius);
      cursor: pointer;
      font-weight: 600;
      font-size: 1rem;
      box-shadow: var(--shadow);
      transition: transform var(--transition), box-shadow var(--transition);
      user-select: none;
      position: relative;
      overflow: hidden;
      z-index: 1;
      justify-content: center;
      margin-top: auto;
      pointer-events: auto;
    }
    button.button::after, button::after {
      content: '';
      position: absolute;
      inset: 0;
      background: linear-gradient(45deg, rgba(255,255,255,0.15) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.15) 50%, rgba(255,255,255,0.15) 75%, transparent 75%, transparent);
      background-size: 20px 20px;
      opacity: 0;
      transition: opacity 0.3s ease;
      pointer-events: none;
      border-radius: var(--radius);
      z-index: 2;
    }
    button.button:hover::after, button:hover::after {
      opacity: 1;
    }
    button.button:hover, button:hover {
      transform: translateY(-2px) scale(1.02);
      box-shadow: var(--shadow-lg);
    }
    button.button:active, button:active {
      transform: translateY(0) scale(0.98);
    }

    /* Inputs side by side for random number */
    #min, #max {
      width: calc(50% - 0.5rem);
      display: inline-block;
      pointer-events: auto;
    }
    #max {
      margin-left: 1rem;
    }

    /* Result text styling */
    .result-text {
      margin-top: 0.5rem;
      font-weight: 600;
      color: var(--accent);
      min-height: 1.4em;
      user-select: text;
      pointer-events: auto;
    }
    .clock-text {
      font-weight: 600;
      font-size: 1.25rem;
      color: var(--secondary);
      user-select: none;
      pointer-events: auto;
    }

    /* Footer */
    footer.footer {
      grid-column: 2;
      margin-top: 3rem;
      text-align: center;
      font-family: 'Poppins', sans-serif;
      font-size: 0.9rem;
      color: var(--muted);
      max-width: 700px;
      margin-left: auto;
      margin-right: auto;
      user-select: none;
      z-index: 10;
    }
    footer.footer p {
      margin-bottom: 0.5rem;
    }

    /* Spiderweb canvas */
    #spiderweb {
      position: fixed;
      inset: 0;
      width: 100%;
      height: 100%;
      z-index: 0;
      background: var(--bg-color);
      cursor: crosshair;
      user-select: none;
      pointer-events: none; /* Important to allow interaction with inputs */
    }

    /* Responsive */
    @media (max-width: 768px) {
      #min, #max {
        width: 100%;
        margin-left: 0 !important;
        margin-bottom: 0.75rem;
      }
      button.button {
        width: 100%;
      }
      .tools-grid {
        grid-template-columns: 1fr !important;
      }
    }
  </style>
</head>
<body>
  <canvas id="spiderweb"></canvas>

  <header class="header">
    <h1>Welcome To Learning Hub</h1>
    <p class="tagline">This is version 1.4, so I'm still working out some bugs.</p>
  </header>

  <main class="content-wrapper">
    <div class="tools-grid">
      <!-- Calculator -->
      <section class="tool-card" aria-label="Calculator tool">
        <h2>üßÆ Calculator</h2>
        <input class="input" type="text" id="expression" placeholder="e.g. 2 + 2" aria-label="Calculator expression input" />
        <button class="button" onclick="calculate()">Calculate</button>
        <div id="result" class="result-text" aria-live="polite"></div>
      </section>

      <!-- Current Time -->
      <section class="tool-card" aria-label="Current time display">
        <h2>üìÖ Current Time</h2>
        <div id="clock" class="clock-text" aria-live="polite" aria-atomic="true"></div>
      </section>

      <!-- Note Pad -->
      <section class="tool-card" aria-label="Note pad tool">
        <h2>üìì Note Pad</h2>
        <textarea class="input" id="notes" placeholder="Type your notes here..." rows="5" aria-label="Notes text area"></textarea>
        <button class="button" onclick="saveNotes()">Save Notes</button>
      </section>

      <!-- Random Number Generator -->
      <section class="tool-card" aria-label="Random number generator">
        <h2>üé≤ Random Number Generator</h2>
        <input class="input" type="number" id="min" placeholder="Min" aria-label="Minimum number" />
        <input class="input" type="number" id="max" placeholder="Max" aria-label="Maximum number" />
        <button class="button" onclick="generateRandom()">Generate</button>
        <div id="randomResult" class="result-text" aria-live="polite"></div>
      </section>

      <!-- Unit Converter -->
      <section class="tool-card" aria-label="Unit converter">
        <h2>üîÅ Unit Converter</h2>
        <input class="input" type="number" id="unitInput" placeholder="Enter value" aria-label="Value to convert" />
        <select class="input" id="unitType" aria-label="Conversion type">
          <option value="cmToIn">cm ‚Üí inches</option>
          <option value="inToCm">inches ‚Üí cm</option>
          <option value="kgToLb">kg ‚Üí pounds</option>
          <option value="lbToKg">pounds ‚Üí kg</option>
        </select>
        <button class="button" onclick="convertUnit()">Convert</button>
        <div id="unitResult" class="result-text" aria-live="polite"></div>
      </section>

      <!-- Secret Code -->
      <section class="tool-card" aria-label="Secret code input">
        <h2>üïµÔ∏è Secret Code</h2>
        <input class="input" type="text" id="secretInput" placeholder="Type your secret code..." aria-label="Secret code input" />
        <div id="secretOutput" style="margin-top: 10px;" aria-live="polite"></div>
      </section>
    </div>
  </main>

  <footer class="footer">
    <p>Special thanks to: Judah for introducing me to the concept. Fisher, for begging me to make it for him. GitHub, for helping me make the files. Copilot, for telling me how to make it. Cloudflare, for deploying this site.</p>
    <p>by John McCombs</p>
  </footer>

  <script>
    // Calculator
    function calculate() {
      const expr = document.getElementById("expression").value;
      try {
        const result = Function('"use strict";return (' + expr + ')')();
        document.getElementById("result").innerText = "Result: " + result;
      } catch {
        document.getElementById("result").innerText = "Invalid expression.";
      }
    }

    // Clock update
    function updateClock() {
      const now = new Date();
      document.getElementById("clock").innerText = now.toLocaleString();
    }
    setInterval(updateClock, 1000);
    updateClock();

    // Save notes locally
    function saveNotes() {
      const notes = document.getElementById("notes").value;
      localStorage.setItem("userNotes", notes);
      alert("Notes saved!");
    }

    // Random number generator
    function generateRandom() {
      const min = parseInt(document.getElementById("min").value);
      const max = parseInt(document.getElementById("max").value);
      if (isNaN(min) || isNaN(max) || min > max) {
        document.getElementById("randomResult").innerText = "Invalid range.";
        return;
      }
      const rand = Math.floor(Math.random() * (max - min + 1)) + min;
      document.getElementById("randomResult").innerText = "Random number: " + rand;
    }

    // Unit converter
    function convertUnit() {
      const value = parseFloat(document.getElementById("unitInput").value);
      const type = document.getElementById("unitType").value;
      let result = "";

      if (isNaN(value)) {
        result = "Please enter a valid number.";
      } else {
        switch (type) {
          case "cmToIn": result = (value / 2.54).toFixed(2) + " in"; break;
          case "inToCm": result = (value * 2.54).toFixed(2) + " cm"; break;
          case "kgToLb": result = (value * 2.20462).toFixed(2) + " lb"; break;
          case "lbToKg": result = (value / 2.20462).toFixed(2) + " kg"; break;
        }
      }

      document.getElementById("unitResult").innerText = result;
    }

    // Secret code input event
    document.getElementById("secretInput").addEventListener("keydown", function (e) {
      if (e.key === "Enter") {
        const input = this.value.trim().toLowerCase();
        if (input === "john is awesome") {
          document.getElementById("secretOutput").innerHTML = `
            <ul style="list-style: none; padding-left: 0; user-select:none;">
              <li><strong>Shift + B</strong>: Opens <em>johnnyboyisthebest.dpdns.org</em> in fullscreen mode</li>
              <li><strong>Shift + D</strong>: Opens <em>School Resource Portal</em> with links to educational games</li>
            </ul>
          `;
        } else {
          document.getElementById("secretOutput").innerText = "Incorrect code.";
        }
      }
    });

    // Keyboard shortcuts with access codes and tab openings
    document.addEventListener("keydown", function (e) {
      if (!e.shiftKey) return;
      const key = e.key.toLowerCase();

      if (key === "b") {
        e.preventDefault();
        const code = prompt("Enter access code:");
        if (code === "1020284") {
          const newTab = window.open("about:blank", "_blank");
          const content = `
            <!DOCTYPE html>
            <html>
            <head>
              <title>Interstellar</title>
              <style>
                body { margin: 0; overflow: hidden; background: black; }
                iframe { width: 100vw; height: 100vh; border: none; }
                #fullscreenBtn {
                  position: fixed;
                  top: 10px;
                  right: 10px;
                  z-index: 9999;
                  padding: 10px 15px;
                  background: #00c6ff;
                  color: white;
                  border: none;
                  font-size: 16px;
                  cursor: pointer;
                }
              </style>
            </head>
            <body>
              <button id="fullscreenBtn">Fullscreen</button>
              <iframe id="proxyFrame" src="https://johnnyboyisthebest.dpdns.org/"></iframe>
              <script>
                document.getElementById("fullscreenBtn").onclick = function() {
                  const iframe = document.getElementById("proxyFrame");
                  if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                  } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                  } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                  }
                };
              <\/script>
            </body>
            </html>
          `;
          newTab.document.open();
          newTab.document.write(content);
          newTab.document.close();
        } else {
          alert("Incorrect code.");
        }
      }

      if (key === "d") {
        e.preventDefault();
        const code = prompt("Enter access code:");
        if (code === "1020284") {
          const newTab = window.open("about:blank", "_blank");
          const content = `
            <!DOCTYPE html>
            <html>
            <head>
              <title>School Resource Portal</title>
              <style>
                body {
                  font-family: Arial, sans-serif;
                  background-color: #f9f9f9;
                  color: #333;
                  padding: 40px;
                  text-align: center;
                }
                h1 {
                  font-size: 2.2em;
                  margin-bottom: 20px;
                  color: #004080;
                }
                ul {
                  list-style: none;
                  padding: 0;
                  max-width: 600px;
                  margin: 0 auto;
                }
                li {
                  margin: 15px 0;
                  padding: 12px 20px;
                  background-color: #ffffff;
                  border: 1px solid #ccc;
                  border-radius: 8px;
                  text-align: left;
                  font-size: 1.1em;
                }
                a {
                  color: #004080;
                  text-decoration: none;
                  cursor: pointer;
                }
                a:hover {
                  text-decoration: underline;
                }
                .footer {
                  margin-top: 40px;
                  font-size: 1em;
                  color: #666;
                }
              </style>
            </head>
            <body>
              <h1>School Resource Portal</h1>
              <ul>
                <li><a onclick="openInNewTab('https://108192.xyz.cdn.cloudflare.net')">Reds Exploit Corner ‚Äì Tools & Resources</a></li>
                <li><a onclick="openInNewTab('https://quiz-math-70.us')">Quiz70 Games ‚Äì blocked for some</a></li>
                <li><a onclick="openInNewTab('https://jordans-math-homework.pages.dev')">Jordan's Math Homework</a></li>
                <li><a onclick="openInNewTab('https://john2.pages.dev')">John2 ‚Äì More games</a></li>
                <li><a onclick="openInNewTab('https://johnlovesmath.pages.dev')">John Loves Math ‚Äì Unreliable</a></li>
                <li><a onclick="openInNewTab('https://novamath.net')">Saratoga Resources ‚Äì I fixed Saratoga</a></li>
                <li><a onclick="openInNewTab('https://geometrytime.pages.dev')">Geometry Time ‚Äì Genizy Math</a></li>
                <li><a onclick="openInNewTab('https://math-hw.pages.dev')">Math Homework ‚Äì Minecraft</a></li>
                <li><a onclick="openInNewTab('https://john3.pages.dev')">Another One of my amazing game sites</a></li>
                <li><a onclick="openInNewTab('https://johns-selection.wasmer.app')">John's Selection ‚Äì Unblocked Games & Proxy</a></li>
              </ul>
              <div class="footer">More coming soon! -John</div>

              <script>
                function openInNewTab(url) {
                  const tab = window.open("about:blank", "_blank");
                  tab.document.write(\`
                    <!DOCTYPE html>
                    <html>
                    <head>
                      <title>Resource Viewer</title>
                      <style>
                        body { margin:0; font-family:Arial; }
                        iframe { border:none; width:100%; height:100vh; }
                      </style>
                    </head>
                    <body>
                      <iframe src="\${url}"></iframe>
                    </body>
                    </html>
                  \`);
                  tab.document.close();
                }
              <\/script>
            </body>
            </html>
          `;
          newTab.document.open();
          newTab.document.write(content);
          newTab.document.close();
        } else {
          alert("Incorrect code.");
        }
      }

      if (key === "r") {
        e.preventDefault();
        const newTab = window.open("about:blank", "_blank");
        const content = `
          <!DOCTYPE html>
          <html>
          <head>
            <title>Private Selection</title>
            <style>
              body { margin: 0; overflow: hidden; background: #111; }
              iframe { width: 100vw; height: 100vh; border: none; }
            </style>
          </head>
          <body>
            <iframe src="https://johns-selection.wasmer.app"></iframe>
          </body>
          </html>
        `;
        newTab.document.open();
        newTab.document.write(content);
        newTab.document.close();
      }

      if (key === "x") {
        e.preventDefault();
        const code = prompt("Enter access code:");
        if (code === "1020284") {
          const newTab = window.open("about:blank", "_blank");
          const content = `
            <!DOCTYPE html>
            <html>
            <head>
              <title>NettleWeb</title>
              <style>
                body { margin: 0; overflow: hidden; background: black; }
                iframe { width: 100vw; height: 100vh; border: none; }
                #fullscreenBtn {
                  position: fixed;
                  top: 10px;
                  right: 10px;
                  z-index: 9999;
                  padding: 10px 15px;
                  background: #00c6ff;
                  color: white;
                  border: none;
                  font-size: 16px;
                  cursor: pointer;
                }
              </style>
            </head>
            <body>
              <iframe id="proxyFrame" src="https://novamath.net/"></iframe>
              <script>
                document.getElementById("fullscreenBtn")?.addEventListener('click', function() {
                  const iframe = document.getElementById("proxyFrame");
                  if (iframe.requestFullscreen) {
                    iframe.requestFullscreen();
                  } else if (iframe.webkitRequestFullscreen) {
                    iframe.webkitRequestFullscreen();
                  } else if (iframe.msRequestFullscreen) {
                    iframe.msRequestFullscreen();
                  }
                });
              <\/script>
            </body>
            </html>
          `;
          newTab.document.open();
          newTab.document.write(content);
          newTab.document.close();
        } else {
          alert("Incorrect code.");
        }
      }

      if (key === "c") {
        e.preventDefault();
        const code = prompt("Enter access code:");
        if (code === "1020284") {
          const newTab = window.open("about:blank", "_blank");
          const content = `
            <!DOCTYPE html>
            <html>
            <head>
              <title>Canlite</title>
              <style>
                body { margin: 0; overflow: hidden; background: black; }
                iframe { width: 100vw; height: 100vh; border: none; }
              </style>
            </head>
            <body>
              <iframe src="https://canlite.org"></iframe>
            </body>
            </html>
          `;
          newTab.document.open();
          newTab.document.write(content);
          newTab.document.close();
        } else {
          alert("Incorrect code.");
        }
      }
    });

    // Restore notes from localStorage on load
    window.addEventListener("load", () => {
      const notes = localStorage.getItem("userNotes");
      if (notes) document.getElementById("notes").value = notes;
    });

    // Spiderweb interactive complex canvas
    const canvas = document.getElementById('spiderweb');
    const ctx = canvas.getContext('2d');
    let width, height;
    function resize() {
      width = window.innerWidth;
      height = window.innerHeight;
      canvas.width = width * devicePixelRatio;
      canvas.height = height * devicePixelRatio;
      canvas.style.width = width + 'px';
      canvas.style.height = height + 'px';
      ctx.setTransform(1, 0, 0, 1, 0, 0);
      ctx.scale(devicePixelRatio, devicePixelRatio);
    }
    resize();
    window.addEventListener('resize', resize);

    const POINTS = 150;
    const MAX_DIST = 130;
    const SPEED = 0.3;
    const NODE_RADIUS = 3;
    const HOVER_RADIUS = 50;
    const colors = ["#38bdf8", "#ef4444", "#94a3b8"];

    let points = Array.from({ length: POINTS }, () => ({
      x: Math.random() * width,
      y: Math.random() * height,
      vx: (Math.random() - 0.5) * SPEED,
      vy: (Math.random() - 0.5) * SPEED,
      c: colors[Math.floor(Math.random() * colors.length)],
      radius: NODE_RADIUS,
      glow: 0,
      connections: []
    }));

    function updateConnections() {
      points.forEach(p => p.connections = []);
      for (let i = 0; i < points.length; i++) {
        const p = points[i];
        for (let j = i + 1; j < points.length; j++) {
          const q = points[j];
          const dx = p.x - q.x, dy = p.y - q.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < MAX_DIST) {
            p.connections.push({ point: q, dist });
            points[j].connections.push({ point: p, dist });
          }
        }
      }
    }
    updateConnections();

    let mouse = { x: null, y: null, isHovering: false };
    canvas.addEventListener('mousemove', e => {
      const rect = canvas.getBoundingClientRect();
      mouse.x = e.clientX - rect.left;
      mouse.y = e.clientY - rect.top;
      mouse.isHovering = true;
    });
    canvas.addEventListener('mouseleave', () => {
      mouse.x = null;
      mouse.y = null;
      mouse.isHovering = false;
    });

    function draw() {
      ctx.clearRect(0, 0, width, height);

      const ROTATION_SPEED = 0.0005;
      const centerX = width / 2;
      const centerY = height / 2;

      ctx.lineWidth = 0.2;
      ctx.strokeStyle = `rgba(100, 149, 237, 0.12)`;
      ctx.beginPath();
      const radialLines = 24;
      for (let i = 0; i < radialLines; i++) {
        const angle = (Math.PI * 2 / radialLines) * i + performance.now() * ROTATION_SPEED;
        ctx.moveTo(centerX, centerY);
        ctx.lineTo(centerX + Math.cos(angle) * width, centerY + Math.sin(angle) * height);
      }
      ctx.stroke();

      ctx.lineWidth = 0.15;
      ctx.strokeStyle = `rgba(100, 149, 237, 0.1)`;
      for (let i = 1; i <= 20; i++) {
        ctx.beginPath();
        const radius = (Math.min(width, height) / 2) * (i / 20);
        ctx.arc(centerX, centerY, radius, 0, Math.PI * 2);
        ctx.stroke();
      }

      points.forEach(p => {
        p.x += p.vx;
        p.y += p.vy;
        if (p.x < 0 || p.x > width) p.vx *= -1;
        if (p.y < 0 || p.y > height) p.vy *= -1;

        p.glow *= 0.9;

        if (mouse.isHovering && mouse.x !== null && mouse.y !== null) {
          const dx = p.x - mouse.x;
          const dy = p.y - mouse.y;
          const dist = Math.sqrt(dx * dx + dy * dy);
          if (dist < HOVER_RADIUS) {
            p.glow = Math.min(1, p.glow + 0.15);
            p.vx += (dx / dist) * 0.05;
            p.vy += (dy / dist) * 0.05;
          }
        }
      });

      points.forEach(p => {
        p.connections.forEach(c => {
          const opacity = 1 - c.dist / MAX_DIST;
          const glowFactor = Math.min(p.glow, c.point.glow);
          ctx.strokeStyle = `rgba(56, 189, 248, ${opacity * 0.5 + glowFactor * 0.5})`;
          ctx.lineWidth = 0.3 + glowFactor * 1.2;
          ctx.beginPath();
          ctx.moveTo(p.x, p.y);
          ctx.lineTo(c.point.x, c.point.y);
          ctx.stroke();
        });
      });

      points.forEach(p => {
        if (p.glow > 0.01) {
          const gradient = ctx.createRadialGradient(p.x, p.y, NODE_RADIUS, p.x, p.y, NODE_RADIUS * 7);
          gradient.addColorStop(0, `rgba(56, 189, 248, ${p.glow * 0.6})`);
          gradient.addColorStop(1, 'rgba(56, 189, 248, 0)');
          ctx.fillStyle = gradient;
          ctx.beginPath();
          ctx.arc(p.x, p.y, NODE_RADIUS * 7, 0, Math.PI * 2);
          ctx.fill();
        }
        ctx.beginPath();
        ctx.arc(p.x, p.y, NODE_RADIUS, 0, Math.PI * 2);
        ctx.fillStyle = p.c;
        ctx.shadowColor = `rgba(56, 189, 248, ${p.glow * 0.7})`;
        ctx.shadowBlur = 8 * p.glow;
        ctx.fill();
        ctx.shadowBlur = 0;
      });

      requestAnimationFrame(draw);
    }
    draw();
  </script>
</body>
</html>
